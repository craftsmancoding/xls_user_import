/*
Copyright (c) 2008-2011, www.redips.net All rights reserved.
Code licensed under the BSD License: http://www.redips.net/license/
http://www.redips.net/javascript/drag-and-drop-table-content/
Version 4.7.4
Sep 27, 2012.
*/
var REDIPS=REDIPS||{};
REDIPS.drag=function(){var s,E,J,ya,Ma,Na,da,ea,ia,za,Aa,R,ja,Ba,S,ka,$,Ca,B,v,N,la,ma,na,Da,Ea,Fa,D,x,Ga,fa,oa,pa,Oa,Pa,Ha,qa,Ia,ra,ga,Ja,Qa,sa,Ra,o=null,F=0,G=0,ta=null,ua=null,K=0,L=0,O=0,P=0,T=0,U=0,t,aa,M=[],f=[],ba,va,q,H=[],n=[],y=null,C=null,Y=0,Z=0,Sa=0,Ta=0,ha=!1,Ka=!1,ca=!1,g=null,u=null,z=null,j=null,w=null,I=null,k=null,A=null,V=null,i=!1,l=!1,r="cell",wa={div:[],cname:"only",other:"deny"},Ua={action:"deny",cname:"mark",exception:[]},W=null,X=null,xa=null,p=null,La=0;J=function(){return!1};
s=function(){var a,b,c,d,e,h;f.length=0;e=y.getElementsByTagName("table");for(b=a=0;a<e.length;a++)if(!("redips_clone"===e[a].parentNode.id||-1<e[a].className.indexOf("nolayout"))){c=e[a].parentNode;d=0;do"TD"===c.nodeName&&d++,c=c.parentNode;while(c&&c!==y);f[b]=e[a];f[b].redips||(f[b].redips={});f[b].redips.container=y;f[b].redips.nestedLevel=d;f[b].redips.idx=b;d=f[b].getElementsByTagName("td");c=0;for(h=!1;c<d.length;c++)if(1<d[c].rowSpan){h=!0;break}f[b].redips.rowspan=h;b++}a=0;for(e=ba=1;a<
f.length;a++)if(0===f[a].redips.nestedLevel){f[a].redips.nestedGroup=e;f[a].redips.sort=100*ba;c=f[a].getElementsByTagName("table");for(b=0;b<c.length;b++)-1<c[b].className.indexOf("nolayout")||(c[b].redips.nestedGroup=e,c[b].redips.sort=100*ba+c[b].redips.nestedLevel);e++;ba++}};ya=function(a){var b=a||window.event,c,d;if(!0===this.redips.animated)return!0;b.cancelBubble=!0;b.stopPropagation&&b.stopPropagation();Ka=b.shiftKey;a=b.which?b.which:b.button;if(Fa(b)||!b.touches&&1!==a)return!0;if(window.getSelection)window.getSelection().removeAllRanges();
else if(document.selection&&"Text"===document.selection.type)try{document.selection.empty()}catch(e){}b.touches?(a=Y=b.touches[0].clientX,d=Z=b.touches[0].clientY):(a=Y=b.clientX,d=Z=b.clientY);Sa=a;Ta=d;ha=!1;REDIPS.drag.obj_old=l=i||this;REDIPS.drag.obj=i=this;ca=-1<i.className.indexOf("clone")?!0:!1;REDIPS.drag.table_sort&&Na(i);y!==i.redips.container&&(y=i.redips.container,s());-1===i.className.indexOf("row")?REDIPS.drag.mode=r="cell":(REDIPS.drag.mode=r="row",REDIPS.drag.obj=i=ga(i));v();!ca&&
"cell"===r&&(i.style.zIndex=999);g=j=k=null;S();z=u=g;I=w=j;V=A=k;REDIPS.drag.source_cell=W=x("TD",i);REDIPS.drag.current_cell=X=W;REDIPS.drag.previous_cell=xa=W;"cell"===r?REDIPS.drag.myhandler_clicked(X):REDIPS.drag.myhandler_row_clicked(X);if(null===g||null===j||null===k)if(S(),z=u=g,I=w=j,V=A=k,null===g||null===j||null===k)return!0;va=q=!1;REDIPS.event.add(document,"mousemove",ea);REDIPS.event.add(document,"touchmove",ea);REDIPS.event.add(document,"mouseup",da);REDIPS.event.add(document,"touchend",
da);i.setCapture&&i.setCapture();null!==g&&(null!==j&&null!==k)&&(aa=Ca(g,j,k));c=D(f[z],"position");"fixed"!==c&&(c=D(f[z].parentNode,"position"));c=B(i,c);o=[d-c[0],c[1]-a,c[2]-d,a-c[3]];y.onselectstart=function(a){b=a||window.event;if(!Fa(b)){b.shiftKey&&document.selection.clear();return false}};return!1};Ma=function(){REDIPS.drag.myhandler_dblclicked()};Na=function(a){var b;b=x("TABLE",a).redips.nestedGroup;for(a=0;a<f.length;a++)f[a].redips.nestedGroup===b&&(f[a].redips.sort=100*ba+f[a].redips.nestedLevel);
f.sort(function(a,b){return b.redips.sort-a.redips.sort});ba++};ga=function(a,b){var c,d,e,h,f,m;if("DIV"===a.nodeName)return h=a,a=x("TR",a),void 0===a.redips&&(a.redips={}),a.redips.div=h,a;d=a;void 0===d.redips&&(d.redips={});a=x("TABLE",a);ca&&q&&(h=d.redips.div,h.className=sa(h.className.replace("clone","")));c=a.cloneNode(!0);ca&&q&&(h.className+=" clone");e=c.rows.length-1;h="animated"===b?0===e?!0:!1:!0;for(f=e;0<=f;f--)if(f!==d.rowIndex){if(!0===h&&void 0===b){e=c.rows[f];for(m=0;m<e.cells.length;m++)if(-1<
e.cells[m].className.indexOf("rowhandler")){h=!1;break}}c.deleteRow(f)}q||(d.redips.empty_row=h);c.redips={};c.redips.container=a.redips.container;c.redips.source_row=d;Qa(d,c.rows[0]);Da(d,c.rows[0]);document.getElementById("redips_clone").appendChild(c);d=B(d,"fixed");c.style.position="fixed";c.style.top=d[0]+"px";c.style.left=d[3]+"px";c.style.width=d[1]-d[3]+"px";return c};Ja=function(a,b,c){var d=f[a],a=d.rows[0].parentNode,e=!1,h,Q,m,j;j=function(){l.redips.empty_row?ra(l,"empty",REDIPS.drag.row_empty_color):
(Q=x("TABLE",Q),Q.deleteRow(m))};void 0===c?c=i:e=!0;Q=c.redips.source_row;m=Q.rowIndex;h=c.getElementsByTagName("tr")[0];c.parentNode.removeChild(c);if(!1!==REDIPS.drag.myhandler_row_dropped_before(m)){if(!e&&-1<p.className.indexOf(REDIPS.drag.trash_cname))q?REDIPS.drag.myhandler_row_deleted():REDIPS.drag.trash_ask_row?confirm("Are you sure you want to delete row?")?(j(),REDIPS.drag.myhandler_row_deleted()):(delete l.redips.empty_row,REDIPS.drag.myhandler_row_undeleted()):(j(),REDIPS.drag.myhandler_row_deleted());
else if((e||!q)&&j(),b<d.rows.length?g===z||"before"===REDIPS.drag.row_position?(a.insertBefore(h,d.rows[b]),b=d.rows[b+1]):(a.insertBefore(h,d.rows[b].nextSibling),b=d.rows[b]):(a.appendChild(h),b=d.rows[0]),b&&(b.redips&&b.redips.empty_row)&&a.deleteRow(b.rowIndex),delete h.redips.empty_row,!e)"TABLE"!==Q.nodeName&&(Q=x("TABLE",Q)),REDIPS.drag.myhandler_row_dropped(h,Q,m);0<h.getElementsByTagName("table").length&&s()}};Qa=function(a,b){var c,d,e,h=[],f=[];h[0]=a.getElementsByTagName("input");h[1]=
a.getElementsByTagName("textarea");h[2]=a.getElementsByTagName("select");f[0]=b.getElementsByTagName("input");f[1]=b.getElementsByTagName("textarea");f[2]=b.getElementsByTagName("select");for(c=0;c<h.length;c++)for(d=0;d<h[c].length;d++)switch(e=h[c][d].type,e){case "text":case "textarea":case "password":f[c][d].value=h[c][d].value;break;case "radio":case "checkbox":f[c][d].checked=h[c][d].checked;break;case "select-one":f[c][d].selectedIndex=h[c][d].selectedIndex;break;case "select-multiple":for(e=
0;e<h[c][d].options.length;e++)f[c][d].options[e].selected=h[c][d].options[e].selected}};da=function(a){var b=a||window.event,c,d,e,a=b.clientX;e=b.clientY;T=U=0;i.releaseCapture&&i.releaseCapture();REDIPS.event.remove(document,"mousemove",ea);REDIPS.event.remove(document,"touchmove",ea);REDIPS.event.remove(document,"mouseup",da);REDIPS.event.remove(document,"touchend",da);y.onselectstart=null;Aa(i);ta=document.documentElement.scrollWidth;ua=document.documentElement.scrollHeight;T=U=0;if(q&&"cell"===
r&&(null===g||null===j||null===k))i.parentNode.removeChild(i),H[l.id]-=1,REDIPS.drag.myhandler_notcloned();else if(null===g||null===j||null===k)REDIPS.drag.myhandler_notmoved();else{g<f.length?(b=f[g],REDIPS.drag.target_cell=p=b.rows[j].cells[k],$(g,j,k,aa),c=g,d=j):null===u||null===w||null===A?(b=f[z],REDIPS.drag.target_cell=p=b.rows[I].cells[V],$(z,I,V,aa),c=z,d=I):(b=f[u],REDIPS.drag.target_cell=p=b.rows[w].cells[A],$(u,w,A,aa),c=u,d=w);if("row"===r)if(va)if(z===c&&I===d){b=i.getElementsByTagName("tr")[0];
l.style.backgroundColor=b.style.backgroundColor;for(a=0;a<b.cells.length;a++)l.cells[a].style.backgroundColor=b.cells[a].style.backgroundColor;i.parentNode.removeChild(i);delete l.redips.empty_row;q?REDIPS.drag.myhandler_row_notcloned():REDIPS.drag.myhandler_row_dropped_source(p)}else Ja(c,d);else REDIPS.drag.myhandler_row_notmoved();else if(!q&&!ha)REDIPS.drag.myhandler_notmoved();else if(q&&z===g&&I===j&&V===k)i.parentNode.removeChild(i),H[l.id]-=1,REDIPS.drag.myhandler_notcloned();else if(q&&!0===
REDIPS.drag.delete_cloned&&(a<b.redips.offset[3]||a>b.redips.offset[1]||e<b.redips.offset[0]||e>b.redips.offset[2]))i.parentNode.removeChild(i),H[l.id]-=1,REDIPS.drag.myhandler_notcloned();else if(-1<p.className.indexOf(REDIPS.drag.trash_cname))i.parentNode.removeChild(i),REDIPS.drag.trash_ask?setTimeout(function(){if(confirm("Are you sure you want to delete?"))za();else{if(!q){f[z].rows[I].cells[V].appendChild(i);v()}REDIPS.drag.myhandler_undeleted()}},20):za();else if("switch"===REDIPS.drag.drop_option)if(a=
REDIPS.drag.myhandler_dropped_before(p),!1===a)ia(!1);else{i.parentNode.removeChild(i);b=p.getElementsByTagName("div");c=b.length;for(a=0;a<c;a++)void 0!==b[0]&&(REDIPS.drag.obj_old=l=b[0],W.appendChild(l),R(l));ia();c&&REDIPS.drag.myhandler_switched()}else"overwrite"===REDIPS.drag.drop_option?(a=REDIPS.drag.myhandler_dropped_before(p),!1!==a&&oa(p)):a=REDIPS.drag.myhandler_dropped_before(p),ia(a);"cell"===r&&0<i.getElementsByTagName("table").length&&s();v();REDIPS.drag.myhandler_final()}u=w=A=null};
ia=function(a){!1!==a?("shift"===REDIPS.drag.drop_option&&(Ra(p)||"always"===REDIPS.drag.shift_after)&&pa(W,p),"top"===REDIPS.drag.multiple_drop&&p.hasChildNodes()?p.insertBefore(i,p.firstChild):p.appendChild(i),R(i),REDIPS.drag.myhandler_dropped(p),q&&(REDIPS.drag.myhandler_cloned_dropped(p),Ea())):q&&i.parentNode.removeChild(i)};R=function(a,b){!1===b?(a.onmousedown=null,a.ontouchstart=null,a.ondblclick=null):(a.onmousedown=ya,a.ontouchstart=ya,a.ondblclick=Ma)};Aa=function(a){a.style.top="";a.style.left=
"";a.style.position="";a.style.zIndex=""};za=function(){var a;q&&Ea();if("shift"===REDIPS.drag.drop_option&&("delete"===REDIPS.drag.shift_after||"always"===REDIPS.drag.shift_after)){switch(REDIPS.drag.shift_option){case "vertical2":a="lastInColumn";break;case "horizontal2":a="lastInRow";break;default:a="last"}pa(W,Ga(a,W)[2])}REDIPS.drag.myhandler_deleted(q)};ea=function(a){var a=a||window.event,b=REDIPS.drag.bound,c,d,e,h;a.touches?(d=Y=a.touches[0].clientX,e=Z=a.touches[0].clientY):(d=Y=a.clientX,
e=Z=a.clientY);c=Math.abs(Sa-d);h=Math.abs(Ta-e);if(!va){if("cell"===r&&(ca||!0===REDIPS.drag.clone_shiftKey&&Ka))REDIPS.drag.obj_old=l=i,REDIPS.drag.obj=i=na(i,!0),q=!0,REDIPS.drag.myhandler_cloned();else{if("row"===r){if(ca||!0===REDIPS.drag.clone_shiftKey_row&&Ka)q=!0;REDIPS.drag.obj_old=l=i;REDIPS.drag.obj=i=ga(i);i.style.zIndex=999}i.setCapture&&i.setCapture();i.style.position="fixed";v();S();"row"===r&&(q?REDIPS.drag.myhandler_row_cloned():REDIPS.drag.myhandler_row_moved())}ka();d>F-o[1]&&(i.style.left=
F-(o[1]+o[3])+"px");e>G-o[2]&&(i.style.top=G-(o[0]+o[2])+"px")}va=!0;if("cell"===r&&(7<c||7<h)&&!ha)ha=!0,ka(),REDIPS.drag.myhandler_moved();d>o[3]&&d<F-o[1]&&(i.style.left=d-o[3]+"px");e>o[0]&&e<G-o[2]&&(i.style.top=e-o[0]+"px");if(d<C[1]&&d>C[3]&&e<C[2]&&e>C[0]&&0===T&&0===U&&(n.containTable||d<n[3]||d>n[1]||e<n[0]||e>n[2]))S(),ja();if(REDIPS.drag.autoscroll){K=b-(F/2>d?d-o[3]:F-d-o[1]);if(0<K){if(K>b&&(K=b),c=N()[0],K*=d<F/2?-1:1,!(0>K&&0>=c||0<K&&c>=ta-F)&&0===T++)REDIPS.event.remove(window,"scroll",
v),la(window)}else K=0;L=b-(G/2>e?e-o[0]:G-e-o[2]);if(0<L){if(L>b&&(L=b),c=N()[1],L*=e<G/2?-1:1,!(0>L&&0>=c||0<L&&c>=ua-G)&&0===U++)REDIPS.event.remove(window,"scroll",v),ma(window)}else L=0;for(h=0;h<M.length;h++)if(c=M[h],c.autoscroll&&d<c.offset[1]&&d>c.offset[3]&&e<c.offset[2]&&e>c.offset[0]){O=b-(c.midstX>d?d-o[3]-c.offset[3]:c.offset[1]-d-o[1]);0<O?(O>b&&(O=b),O*=d<c.midstX?-1:1,0===T++&&(REDIPS.event.remove(c.div,"scroll",v),la(c.div))):O=0;P=b-(c.midstY>e?e-o[0]-c.offset[0]:c.offset[2]-e-
o[2]);0<P?(P>b&&(P=b),P*=e<c.midstY?-1:1,0===U++&&(REDIPS.event.remove(c.div,"scroll",v),ma(c.div))):P=0;break}else O=P=0}a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()};ja=function(){if(g<f.length&&(g!==u||j!==w||k!==A))null!==u&&(null!==w&&null!==A)&&($(u,w,A,aa),REDIPS.drag.previous_cell=xa=f[u].rows[w].cells[A],REDIPS.drag.current_cell=X=f[g].rows[j].cells[k],"switching"===REDIPS.drag.drop_option&&"cell"===r&&(fa(X,xa),v(),S()),"cell"===r?REDIPS.drag.myhandler_changed(X):"row"===r&&
(g!==u||j!==w)&&REDIPS.drag.myhandler_row_changed(X)),ka()};Ba=function(){if("number"===typeof window.innerWidth)F=window.innerWidth,G=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))F=document.documentElement.clientWidth,G=document.documentElement.clientHeight;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))F=document.body.clientWidth,G=document.body.clientHeight;ta=document.documentElement.scrollWidth;
ua=document.documentElement.scrollHeight;v()};S=function(){var a,b,c,d,e,h;c=[];a=function(){null!==u&&(null!==w&&null!==A)&&(g=u,j=w,k=A)};b=Y;h=Z;for(g=0;g<f.length;g++)if(!1!==f[g].redips.enabled&&(c[0]=f[g].redips.offset[0],c[1]=f[g].redips.offset[1],c[2]=f[g].redips.offset[2],c[3]=f[g].redips.offset[3],void 0!==f[g].sca&&(c[0]=c[0]>f[g].sca.offset[0]?c[0]:f[g].sca.offset[0],c[1]=c[1]<f[g].sca.offset[1]?c[1]:f[g].sca.offset[1],c[2]=c[2]<f[g].sca.offset[2]?c[2]:f[g].sca.offset[2],c[3]=c[3]>f[g].sca.offset[3]?
c[3]:f[g].sca.offset[3]),c[3]<b&&b<c[1]&&c[0]<h&&h<c[2])){c=f[g].redips.row_offset;for(j=0;j<c.length-1;j++)if(void 0!==c[j]){n[0]=c[j][0];if(void 0!==c[j+1])n[2]=c[j+1][0];else for(d=j+2;d<c.length;d++)if(void 0!==c[d]){n[2]=c[d][0];break}if(h<=n[2])break}d=j;j===c.length-1&&(n[0]=c[j][0],n[2]=f[g].redips.offset[2]);do for(k=e=f[g].rows[j].cells.length-1;0<=k&&!(n[3]=c[j][3]+f[g].rows[j].cells[k].offsetLeft,n[1]=n[3]+f[g].rows[j].cells[k].offsetWidth,n[3]<=b&&b<=n[1]);k--);while(f[g].redips.rowspan&&
-1===k&&0<j--);0>j||0>k?a():j!==d&&(n[0]=c[j][0],n[2]=n[0]+f[g].rows[j].cells[k].offsetHeight,(h<n[0]||h>n[2])&&a());b=f[g].rows[j].cells[k];n.containTable=0<b.childNodes.length&&0<b.getElementsByTagName("table").length?!0:!1;if(-1===b.className.indexOf(REDIPS.drag.trash_cname))if(h=-1<b.className.indexOf(REDIPS.drag.only.cname)?!0:!1,!0===h){if(-1===b.className.indexOf(wa.div[i.id])){a();break}}else if(void 0!==wa.div[i.id]&&"deny"===wa.other){a();break}else if(h=-1<b.className.indexOf(REDIPS.drag.mark.cname)?
!0:!1,(!0===h&&"deny"===REDIPS.drag.mark.action||!1===h&&"allow"===REDIPS.drag.mark.action)&&-1===b.className.indexOf(Ua.exception[i.id])){a();break}h=-1<b.className.indexOf("single")?!0:!1;if("cell"===r){if(("single"===REDIPS.drag.drop_option||h)&&0<b.childNodes.length){if(1===b.childNodes.length&&3===b.firstChild.nodeType)break;h=!0;for(d=b.childNodes.length-1;0<=d;d--)if(b.childNodes[d].className&&-1<b.childNodes[d].className.indexOf("drag")){h=!1;break}if(!h&&(null!==u&&null!==w&&null!==A)&&(z!==
g||I!==j||V!==k)){a();break}}if(-1<b.className.indexOf("rowhandler")){a();break}if(b.parentNode.redips&&b.parentNode.redips.empty_row){a();break}}break}};ka=function(){g<f.length&&(null!==g&&null!==j&&null!==k)&&(aa=Ca(g,j,k),$(g,j,k),u=g,w=j,A=k)};$=function(a,b,c,d){if("cell"===r&&ha)c=f[a].rows[b].cells[c].style,c.backgroundColor=void 0===d?REDIPS.drag.hover.color_td:d.color[0].toString(),void 0!==REDIPS.drag.hover.border_td&&(void 0===d?c.border=REDIPS.drag.hover.border_td:(c.borderTopWidth=d.top[0][0],
c.borderTopStyle=d.top[0][1],c.borderTopColor=d.top[0][2],c.borderRightWidth=d.right[0][0],c.borderRightStyle=d.right[0][1],c.borderRightColor=d.right[0][2],c.borderBottomWidth=d.bottom[0][0],c.borderBottomStyle=d.bottom[0][1],c.borderBottomColor=d.bottom[0][2],c.borderLeftWidth=d.left[0][0],c.borderLeftStyle=d.left[0][1],c.borderLeftColor=d.left[0][2]));else if("row"===r){a=f[a].rows[b];for(b=0;b<a.cells.length;b++)c=a.cells[b].style,c.backgroundColor=void 0===d?REDIPS.drag.hover.color_tr:d.color[b].toString(),
void 0!==REDIPS.drag.hover.border_tr&&(void 0===d?g===z?j<I?c.borderTop=REDIPS.drag.hover.border_tr:c.borderBottom=REDIPS.drag.hover.border_tr:"before"===REDIPS.drag.row_position?c.borderTop=REDIPS.drag.hover.border_tr:c.borderBottom=REDIPS.drag.hover.border_tr:(c.borderTopWidth=d.top[b][0],c.borderTopStyle=d.top[b][1],c.borderTopColor=d.top[b][2],c.borderBottomWidth=d.bottom[b][0],c.borderBottomStyle=d.bottom[b][1],c.borderBottomColor=d.bottom[b][2]))}};Ca=function(a,b,c){var d={color:[],top:[],
right:[],bottom:[],left:[]},e=function(a,b){var c="border"+b+"Style",d="border"+b+"Color";return[D(a,"border"+b+"Width"),D(a,c),D(a,d)]};if("cell"===r)c=f[a].rows[b].cells[c],d.color[0]=c.style.backgroundColor,void 0!==REDIPS.drag.hover.border_td&&(d.top[0]=e(c,"Top"),d.right[0]=e(c,"Right"),d.bottom[0]=e(c,"Bottom"),d.left[0]=e(c,"Left"));else{a=f[a].rows[b];for(b=0;b<a.cells.length;b++)c=a.cells[b],d.color[b]=c.style.backgroundColor,void 0!==REDIPS.drag.hover.border_tr&&(d.top[b]=e(c,"Top"),d.bottom[b]=
e(c,"Bottom"))}return d};B=function(a,b,c){var d=0,e=0,h=a;"fixed"!==b&&(b=N(),d=0-b[0],e=0-b[1]);if(void 0===c||!0===c){do d+=a.offsetLeft-a.scrollLeft,e+=a.offsetTop-a.scrollTop,a=a.offsetParent;while(a&&"BODY"!==a.nodeName)}else{do d+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent;while(a&&"BODY"!==a.nodeName)}return[e,d+h.offsetWidth,e+h.offsetHeight,d]};v=function(){var a,b,c,d;for(a=0;a<f.length;a++){c=[];d=D(f[a],"position");"fixed"!==d&&(d=D(f[a].parentNode,"position"));for(b=f[a].rows.length-
1;0<=b;b--)"none"!==f[a].rows[b].style.display&&(c[b]=B(f[a].rows[b],d));f[a].redips.offset=B(f[a],d);f[a].redips.row_offset=c}C=B(y);for(a=0;a<M.length;a++)d=D(M[a].div,"position"),b=B(M[a].div,d,!1),M[a].offset=b,M[a].midstX=(b[1]+b[3])/2,M[a].midstY=(b[0]+b[2])/2};N=function(){var a,b;"number"===typeof window.pageYOffset?(a=window.pageXOffset,b=window.pageYOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(a=document.body.scrollLeft,b=document.body.scrollTop):document.documentElement&&
(document.documentElement.scrollLeft||document.documentElement.scrollTop)?(a=document.documentElement.scrollLeft,b=document.documentElement.scrollTop):a=b=0;return[a,b]};la=function(a){var b,c;b=Y;c=Z;0<T&&(v(),S(),b<C[1]&&(b>C[3]&&c<C[2]&&c>C[0])&&ja());"object"===typeof a&&(t=a);t===window?(a=N()[0],b=ta-F,c=K):(a=t.scrollLeft,b=t.scrollWidth-t.clientWidth,c=O);0<T&&(0>c&&0<a||0<c&&a<b)?(t===window?(window.scrollBy(c,0),N(),a=parseInt(i.style.left,10),isNaN(a)):t.scrollLeft+=c,setTimeout(la,REDIPS.drag.speed)):
(REDIPS.event.add(t,"scroll",v),T=0,n=[0,0,0,0])};ma=function(a){var b,c;b=Y;c=Z;0<U&&(v(),S(),b<C[1]&&(b>C[3]&&c<C[2]&&c>C[0])&&ja());"object"===typeof a&&(t=a);t===window?(a=N()[1],b=ua-G,c=L):(a=t.scrollTop,b=t.scrollHeight-t.clientHeight,c=P);0<U&&(0>c&&0<a||0<c&&a<b)?(t===window?(window.scrollBy(0,c),N(),a=parseInt(i.style.top,10),isNaN(a)):t.scrollTop+=c,setTimeout(ma,REDIPS.drag.speed)):(REDIPS.event.add(t,"scroll",v),U=0,n=[0,0,0,0])};na=function(a,b){var c=a.cloneNode(!0),d=c.className,e,
h;!0===b&&(document.getElementById("redips_clone").appendChild(c),c.style.zIndex=999,c.style.position="fixed",e=B(a),h=B(c),c.style.top=e[0]-h[0]+"px",c.style.left=e[3]-h[3]+"px");c.setCapture&&c.setCapture();d=d.replace("clone","");d=d.replace(/climit(\d)_(\d+)/,"");c.className=sa(d);void 0===H[a.id]&&(H[a.id]=0);c.id=a.id+"c"+H[a.id];H[a.id]+=1;Da(a,c);return c};Da=function(a,b){var c=[],d;c[0]=function(a,b){a.redips&&(b.redips={},b.redips.enabled=a.redips.enabled,b.redips.container=a.redips.container,
a.redips.enabled&&R(b))};c[1]=function(a,b){a.redips&&(b.redips={},b.redips.empty_row=a.redips.empty_row)};d=function(d){var h,f,m;f=["DIV","TR"];h=a.getElementsByTagName(f[d]);f=b.getElementsByTagName(f[d]);for(m=0;m<f.length;m++)c[d](h[m],f[m])};if("DIV"===a.nodeName)c[0](a,b);else if("TR"===a.nodeName)c[1](a,b);d(0);d(1)};Ea=function(){var a,b,c;c=l.className;a=c.match(/climit(\d)_(\d+)/);null!==a&&(b=parseInt(a[1],10),a=parseInt(a[2],10),a-=1,c=c.replace(/climit\d_\d+/g,""),0>=a?(c=c.replace("clone",
""),2===b?(c=c.replace("drag",""),R(l,!1),l.style.cursor="auto",REDIPS.drag.myhandler_clonedend2()):REDIPS.drag.myhandler_clonedend1()):c=c+" climit"+b+"_"+a,l.className=sa(c))};Fa=function(a){var b=!1;a.srcElement?(b=a.srcElement.nodeName,a=a.srcElement.className):(b=a.target.nodeName,a=a.target.className);switch(b){case "A":case "INPUT":case "SELECT":case "OPTION":case "TEXTAREA":b=!0;break;default:b=/\bnodrag\b/i.test(a)?!0:!1}return b};E=function(a,b,c){var d,e=[],h=[],f,m,i,g,j=/\bdrag\b/i,k=
/\bnoautoscroll\b/i;m=REDIPS.drag.opacity_disabled;!0===a||"init"===a?(f=REDIPS.drag.border,i="move",g=!0):(f=REDIPS.drag.border_disabled,i="auto",g=!1);void 0===b?e=y.getElementsByTagName("div"):"subtree"===c?e="string"===typeof b?document.getElementById(b).getElementsByTagName("div"):b.getElementsByTagName("div"):e[0]="string"===typeof b?document.getElementById(b):b;for(c=b=0;b<e.length;b++)if(j.test(e[b].className))"init"===a||void 0===e[b].redips?(e[b].redips={},e[b].redips.container=y):!0===
a&&"number"===typeof m?(e[b].style.opacity="",e[b].style.filter=""):!1===a&&"number"===typeof m&&(e[b].style.opacity=m/100,e[b].style.filter="alpha(opacity="+m+")"),R(e[b],g),e[b].style.borderStyle=f,e[b].style.cursor=i,e[b].redips.enabled=g;else if("init"===a&&(h=D(e[b],"overflow"),"visible"!==h)){REDIPS.event.add(e[b],"scroll",v);h=D(e[b],"position");d=B(e[b],h,!1);h=k.test(e[b].className)?!1:!0;M[c]={div:e[b],offset:d,midstX:(d[1]+d[3])/2,midstY:(d[0]+d[2])/2,autoscroll:h};h=e[b].getElementsByTagName("table");
for(d=0;d<h.length;d++)h[d].sca=M[c];c++}};D=function(a,b){var c;a&&a.currentStyle?c=a.currentStyle[b]:a&&window.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null)[b]);return c};x=function(a,b,c){b=b.parentNode;for(void 0===c&&(c=0);b&&b.nodeName!==a;)if((b=b.parentNode)&&b.nodeName===a&&0<c)c--,b=b.parentNode;return b};Ga=function(a,b){var c=x("TABLE",b),d,e;switch(a){case "firstInColumn":d=0;e=b.cellIndex;break;case "firstInRow":d=b.parentNode.rowIndex;e=0;break;case "lastInColumn":d=
c.rows.length-1;e=b.cellIndex;break;case "lastInRow":d=b.parentNode.rowIndex;e=c.rows[d].cells.length-1;break;case "last":d=c.rows.length-1;e=c.rows[d].cells.length-1;break;default:d=e=0}return[d,e,c.rows[d].cells[e]]};fa=function(a,b,c){var d,e,h;d=function(a,b){var c=REDIPS.drag.get_position(b);REDIPS.drag.move_object({obj:a,target:c,callback:function(a){La--;0===La&&(a=REDIPS.drag.find_parent("TABLE",a),REDIPS.drag.enable_table(!0,a))}})};if(a!==b&&!("object"!==typeof a||"object"!==typeof b))if(e=
a.childNodes.length,"animation"===c){0<e&&(c=x("TABLE",b),REDIPS.drag.enable_table(!1,c));for(c=0;c<e;c++)1===a.childNodes[c].nodeType&&"DIV"===a.childNodes[c].nodeName&&(La++,d(a.childNodes[c],b))}else for(d=c=0;c<e;c++)1===a.childNodes[d].nodeType&&"DIV"===a.childNodes[d].nodeName?(h=a.childNodes[d],b.appendChild(h),R(h)):d++};oa=function(a){var b,c;if("TD"!==a.nodeName)return!1;c=a.childNodes.length;for(b=0;b<c;b++)a.removeChild(a.childNodes[0])};pa=function(a,b){var c,d,e,h,f,m,i,g,j,k,l;if(a!==
b){f=REDIPS.drag.shift_option;c=x("TABLE",a);d=x("TABLE",b);m=Oa(d);c===d&&(e=[a.redips.rowIndex,a.redips.cellIndex]);h=[b.redips.rowIndex,b.redips.cellIndex];i=d.rows.length-1;g=Pa(d);switch(f){case "vertical2":c=c===d&&a.cellIndex===b.cellIndex?e:[i,b.redips.cellIndex];break;case "horizontal2":c=c===d&&a.parentNode.rowIndex===b.parentNode.rowIndex?e:[b.redips.rowIndex,g];break;default:c=c===d?e:[i,g]}"vertical1"===f||"vertical2"===f?(f=1E3*c[1]+c[0]<1E3*h[1]+h[0]?1:-1,l=i,d=0,e=1):(f=1E3*c[0]+c[1]<
1E3*h[0]+h[1]?1:-1,l=g,d=1,e=0);for(;c[0]!==h[0]||c[1]!==h[1];)if(g=m[c[0]+"-"+c[1]],c[d]+=f,0>c[d]?(c[d]=l,c[e]--):c[d]>l&&(c[d]=0,c[e]++),i=m[c[0]+"-"+c[1]],void 0!==i&&(j=i),void 0!==g&&(k=g),void 0!==i&&void 0!==k||void 0!==j&&void 0!==g)REDIPS.drag.animation_shift?fa(j,k,"animation"):fa(j,k)}};Oa=function(a){var b=[],c,d={},e,f,i,m,g,j,k,l;m=a.rows;for(g=0;g<m.length;g++)for(j=0;j<m[g].cells.length;j++){c=m[g].cells[j];a=c.parentNode.rowIndex;e=c.rowSpan||1;f=c.colSpan||1;b[a]=b[a]||[];for(k=
0;k<b[a].length+1;k++)if("undefined"===typeof b[a][k]){i=k;break}d[a+"-"+i]=c;void 0===c.redips&&(c.redips={});c.redips.rowIndex=a;c.redips.cellIndex=i;for(k=a;k<a+e;k++){b[k]=b[k]||[];c=b[k];for(l=i;l<i+f;l++)c[l]="x"}}return d};Pa=function(a){var b=a.rows,c=0,d,e;"string"===typeof a&&document.getElementById(a);for(d=0;d<b.length;d++){for(e=a=0;e<b[d].cells.length;e++)a+=b[d].cells[e].colSpan||1;a>c&&(c=a)}return c};Ha=function(a,b){var c=(b.k1-b.k2*a)*(b.k1-b.k2*a),d,a=a+REDIPS.drag.animation_step*
(4-3*c)*b.direction;d=b.m*a+b.b;"horizontal"===b.type?(b.obj.style.left=a+"px",b.obj.style.top=d+"px"):(b.obj.style.left=d+"px",b.obj.style.top=a+"px");a<b.last&&0<b.direction||a>b.last&&0>b.direction?setTimeout(function(){Ha(a,b)},REDIPS.drag.animation_pause*c):(Aa(b.obj),b.obj.redips.animated=!1,"cell"===b.mode?(!0===b.overwrite&&oa(b.target_cell),b.target_cell.appendChild(b.obj),R(b.obj)):Ja(qa(b.target[0]),b.target[1],b.obj),"function"===typeof b.callback&&b.callback(b.obj))};Ia=function(a){var b,
c,d;b=[];b=c=d=-1;if(void 0===a)b=g<f.length?f[g].redips.idx:null===u||null===w||null===A?f[z].redips.idx:f[u].redips.idx,c=f[z].redips.idx,b=[b,j,k,c,I,V];else{if(a="string"===typeof a?document.getElementById(a):a)"TD"!==a.nodeName&&(a=x("TD",a)),a&&"TD"===a.nodeName&&(b=a.cellIndex,c=a.parentNode.rowIndex,a=x("TABLE",a),d=a.redips.idx);b=[d,c,b]}return b};qa=function(a){var b;for(b=0;b<f.length&&f[b].redips.idx!==a;b++);return b};sa=function(a){void 0!==a&&(a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,
" "));return a};Ra=function(a){var b;for(b=0;b<a.childNodes.length;b++)if(1===a.childNodes[b].nodeType)return!0;return!1};ra=function(a,b,c){var d,e;"string"===typeof a&&(a=document.getElementById(a),a=x("TABLE",a));if("TR"===a.nodeName){a=a.getElementsByTagName("td");for(d=0;d<a.length;d++)if(a[d].style.backgroundColor=c?c:"","empty"===b)a[d].innerHTML="";else for(e=0;e<a[d].childNodes.length;e++)1===a[d].childNodes[e].nodeType&&(a[d].childNodes[e].style.opacity=b/100,a[d].childNodes[e].style.filter=
"alpha(opacity="+b+")")}else a.style.opacity=b/100,a.style.filter="alpha(opacity="+b+")",a.style.backgroundColor=c?c:""};return{obj:i,obj_old:l,mode:r,source_cell:W,previous_cell:xa,current_cell:X,target_cell:p,hover:{color_td:"#E7AB83",color_tr:"#E7AB83"},autoscroll:!0,bound:25,speed:20,only:wa,mark:Ua,border_disabled:"dotted",opacity_disabled:void 0,trash_cname:"trash",trash_ask:!0,trash_ask_row:!0,save_pname:"p",drop_option:"multiple",shift_option:"horizontal1",multiple_drop:"bottom",
delete_cloned:!0,delete_shifted:!1,clone_shiftKey:!1,clone_shiftKey_row:!1,animation_pause:20,animation_step:2,animation_shift:!1,shift_after:"default",row_empty_color:"White",row_position:"before",table_sort:!0,init:function(a){var b;if(void 0===a||"string"!==typeof a)a="drag";y=document.getElementById(a);document.getElementById("redips_clone")||(a=document.createElement("div"),a.id="redips_clone",a.style.width=a.style.height="1px",y.appendChild(a));E("init");s();Ba();REDIPS.event.add(window,"resize",
Ba);b=y.getElementsByTagName("img");for(a=0;a<b.length;a++)REDIPS.event.add(b[a],"mousemove",J),REDIPS.event.add(b[a],"touchmove",J);REDIPS.event.add(window,"scroll",v)},enable_drag:E,enable_table:function(a,b){var c;if("object"===typeof b&&"TABLE"===b.nodeName)b.redips.enabled=a;else for(c=0;c<f.length;c++)-1<f[c].className.indexOf(b)&&(f[c].redips.enabled=a)},clone_div:na,save_content:function(a,b){var c="",d,e,f,i,g,j,k,l=[],n=REDIPS.drag.save_pname;"string"===typeof a&&(a=document.getElementById(a));
if(void 0!==a&&"object"===typeof a&&"TABLE"===a.nodeName){d=a.rows.length;for(g=0;g<d;g++){e=a.rows[g].cells.length;for(j=0;j<e;j++)if(f=a.rows[g].cells[j],0<f.childNodes.length)for(k=0;k<f.childNodes.length;k++)i=f.childNodes[k],"DIV"===i.nodeName&&-1<i.className.indexOf("drag")&&(c+=n+"[]="+i.id+"_"+g+"_"+j+"&",l.push([i.id,g,j]))}c="json"===b&&0<l.length?JSON.stringify(l):c.substring(0,c.length-1)}return c},relocate:fa,empty_cell:oa,move_object:function(a){var b={direction:1},c,d,e,h,i,g;b.callback=
a.callback;b.overwrite=a.overwrite;"string"===typeof a.id?b.obj=b.obj_old=document.getElementById(a.id):"object"===typeof a.obj&&"DIV"===a.obj.nodeName&&(b.obj=b.obj_old=a.obj);if("row"===a.mode){b.mode="row";g=qa(a.source[0]);i=a.source[1];l=b.obj_old=f[g].rows[i];if(l.redips&&!0===l.redips.empty_row)return!1;b.obj=ga(b.obj_old,"animated")}else if(b.obj&&-1<b.obj.className.indexOf("row")){b.mode="row";b.obj=b.obj_old=l=x("TR",b.obj);if(l.redips&&!0===l.redips.empty_row)return!1;b.obj=ga(b.obj_old,
"animated")}else b.mode="cell";if(!("object"!==typeof b.obj||null===b.obj))return b.obj.style.zIndex=999,y!==b.obj.redips.container&&(y=b.obj.redips.container,s()),g=B(b.obj),e=g[1]-g[3],h=g[2]-g[0],c=g[3],d=g[0],!0===a.clone&&"cell"===b.mode&&(b.obj=na(b.obj,!0),REDIPS.drag.myhandler_cloned(b.obj)),void 0===a.target&&(a.target=Ia()),b.target=a.target,g=qa(a.target[0]),i=a.target[1],a=a.target[2],i>f[g].rows.length-1&&(i=f[g].rows.length-1),b.target_cell=f[g].rows[i].cells[a],"cell"===b.mode?(g=B(b.target_cell),
i=g[1]-g[3],a=g[2]-g[0],e=g[3]+(i-e)/2,h=g[0]+(a-h)/2):(g=B(f[g].rows[i]),e=g[3],h=g[0]),g=e-c,a=h-d,b.obj.style.position="fixed",Math.abs(g)>Math.abs(a)?(b.type="horizontal",b.m=a/g,b.b=d-b.m*c,b.k1=(c+e)/(c-e),b.k2=2/(c-e),c>e&&(b.direction=-1),g=c,b.last=e):(b.type="vertical",b.m=g/a,b.b=c-b.m*d,b.k1=(d+h)/(d-h),b.k2=2/(d-h),d>h&&(b.direction=-1),g=d,b.last=h),b.obj.redips.animated=!0,Ha(g,b),[b.obj,b.obj_old]},shift_cells:pa,delete_object:function(a){"object"===typeof a&&"DIV"===a.nodeName?a.parentNode.removeChild(a):
"string"===typeof a&&(a=document.getElementById(a))&&a.parentNode.removeChild(a)},get_position:Ia,row_opacity:ra,row_empty:function(a,b,c){a=document.getElementById(a).rows[b];void 0===c&&(c=REDIPS.drag.row_empty_color);void 0===a.redips&&(a.redips={});a.redips.empty_row=!0;ra(a,"empty",c)},getScrollPosition:N,get_style:D,find_parent:x,find_cell:Ga,myhandler_clicked:function(){},myhandler_dblclicked:function(){},myhandler_moved:function(){},myhandler_notmoved:function(){},myhandler_dropped:function(){},
myhandler_dropped_before:function(){},myhandler_switched:function(){},myhandler_changed:function(){},myhandler_cloned:function(){},myhandler_cloned_dropped:function(){},myhandler_clonedend1:function(){},myhandler_clonedend2:function(){},myhandler_notcloned:function(){},myhandler_deleted:function(){},myhandler_undeleted:function(){},myhandler_final:function(){},myhandler_row_clicked:function(){},myhandler_row_moved:function(){},myhandler_row_notmoved:function(){},myhandler_row_dropped:function(){},
myhandler_row_dropped_before:function(){},myhandler_row_dropped_source:function(){},myhandler_row_changed:function(){},myhandler_row_cloned:function(){},myhandler_row_notcloned:function(){},myhandler_row_deleted:function(){},myhandler_row_undeleted:function(){}}}();
REDIPS.event||(REDIPS.event=function(){return{add:function(s,E,J){s.addEventListener?s.addEventListener(E,J,!1):s.attachEvent?s.attachEvent("on"+E,J):s["on"+E]=J},remove:function(s,E,J){s.removeEventListener?s.removeEventListener(E,J,!1):s.detachEvent?s.detachEvent("on"+E,J):s["on"+E]=null}}}());

/*****Bootstrap plugins*****/
!function(a){a(function(){"use strict";a.support.transition=function(){var a=function(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},c;for(c in b){if(a.style[c]!==undefined){return b[c]}}}();return a&&{end:a}}()})}(window.jQuery);!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;if(!d){d=c.attr("href");d=d&&d.replace(/.*(?=#[^\s]*$)/,"")}e=a(d);b&&b.preventDefault();e.length||(e=c.hasClass("alert")?c:c.parent());e.trigger(b=a.Event("close"));if(b.isDefaultPrevented())return;e.removeClass("in");a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()};a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");if(!e)d.data("alert",e=new c(this));if(typeof b=="string")e[b].call(d)})};a.fn.alert.Constructor=c;a(function(){a("body").on("click.alert.data-api",b,c.prototype.close)})}(window.jQuery);!function(a){"use strict";var b=function(b,c){this.$element=a(b);this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a=a+"Text";d.resetText||c.data("resetText",c[e]());c[e](d[a]||this.options[a]);setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)};b.prototype.toggle=function(){var a=this.$element.parent('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active");this.$element.toggleClass("active")};a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;if(!e)d.data("button",e=new b(this,f));if(c=="toggle")e.toggle();else if(c)e.setState(c)})};a.fn.button.defaults={loadingText:"loading..."};a.fn.button.Constructor=b;a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);if(!c.hasClass("btn"))c=c.closest(".btn");c.button("toggle")})})}(window.jQuery);!function(a){"use strict";var b=function(b,c){this.$element=a(b);this.options=c;this.options.slide&&this.slide(this.options.slide);this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){if(!b)this.paused=false;this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval));return this},to:function(b){var c=this.$element.find(".active"),d=c.parent().children(),e=d.index(c),f=this;if(b>d.length-1||b<0)return;if(this.sliding){return this.$element.one("slid",function(){f.to(b)})}if(e==b){return this.pause().cycle()}return this.slide(b>e?"next":"prev",a(d[b]))},pause:function(a){if(!a)this.paused=true;clearInterval(this.interval);this.interval=null;return this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this,j=a.Event("slide");this.sliding=true;f&&this.pause();e=e.length?e:this.$element.find(".item")[h]();if(e.hasClass("active"))return;if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(j);if(j.isDefaultPrevented())return;e.addClass(b);e[0].offsetWidth;d.addClass(g);e.addClass(g);this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active");d.removeClass(["active",g].join(" "));i.sliding=false;setTimeout(function(){i.$element.trigger("slid")},0)})}else{this.$element.trigger(j);if(j.isDefaultPrevented())return;d.removeClass("active");e.addClass("active");this.sliding=false;this.$element.trigger("slid")}f&&this.cycle();return this}};a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c);if(!e)d.data("carousel",e=new b(this,f));if(typeof c=="number")e.to(c);else if(typeof c=="string"||(c=f.slide))e[c]();else if(f.interval)e.cycle()})};a.fn.carousel.defaults={interval:5e3,pause:"hover"};a.fn.carousel.Constructor=b;a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=!e.data("modal")&&a.extend({},e.data(),c.data());e.carousel(f);b.preventDefault()})})}(window.jQuery);!function(a){"use strict";var b=function(b,c){this.$element=a(b);this.options=a.extend({},a.fn.collapse.defaults,c);if(this.options.parent){this.$parent=a(this.options.parent)}this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(this.transitioning)return;b=this.dimension();c=a.camelCase(["scroll",b].join("-"));d=this.$parent&&this.$parent.find("> .accordion-group > .in");if(d&&d.length){e=d.data("collapse");if(e&&e.transitioning)return;d.collapse("hide");e||d.data("collapse",null)}this.$element[b](0);this.transition("addClass",a.Event("show"),"shown");this.$element[b](this.$element[0][c])},hide:function(){var b;if(this.transitioning)return;b=this.dimension();this.reset(this.$element[b]());this.transition("removeClass",a.Event("hide"),"hidden");this.$element[b](0)},reset:function(a){var b=this.dimension();this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth;this.$element[a!==null?"addClass":"removeClass"]("collapse");return this},transition:function(b,c,d){var e=this,f=function(){if(c.type=="show")e.reset();e.transitioning=0;e.$element.trigger(d)};this.$element.trigger(c);if(c.isDefaultPrevented())return;this.transitioning=1;this.$element[b]("in");a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;if(!e)d.data("collapse",e=new b(this,f));if(typeof c=="string")e[c]()})};a.fn.collapse.defaults={toggle:true};a.fn.collapse.Constructor=b;a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();a(e).collapse(f)})})}(window.jQuery);!function(a){function d(){a(b).parent().removeClass("open")}"use strict";var b='[data-toggle="dropdown"]',c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),e,f,g;if(c.is(".disabled, :disabled"))return;f=c.attr("data-target");if(!f){f=c.attr("href");f=f&&f.replace(/.*(?=#[^\s]*$)/,"")}e=a(f);e.length||(e=c.parent());g=e.hasClass("open");d();if(!g)e.toggleClass("open");return false}};a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");if(!e)d.data("dropdown",e=new c(this));if(typeof b=="string")e[b].call(d)})};a.fn.dropdown.Constructor=c;a(function(){a("html").on("click.dropdown.data-api",d);a("body").on("click.dropdown",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api",b,c.prototype.toggle)})}(window.jQuery);!function(a){function c(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end);d.call(b)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c);d.call(b)})}function d(a){this.$element.hide().trigger("hidden");e.call(this)}function e(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body);if(this.options.backdrop!="static"){this.$backdrop.click(a.proxy(this.hide,this))}if(e)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");e?this.$backdrop.one(a.support.transition.end,b):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(f,this)):f.call(this)}else if(b){b()}}function f(){this.$backdrop.remove();this.$backdrop=null}function g(){var b=this;if(this.isShown&&this.options.keyboard){a(document).on("keyup.dismiss.modal",function(a){a.which==27&&b.hide()})}else if(!this.isShown){a(document).off("keyup.dismiss.modal")}}"use strict";var b=function(b,c){this.options=c;this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this))};b.prototype={constructor:b,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c);if(this.isShown||c.isDefaultPrevented())return;a("body").addClass("modal-open");this.isShown=true;g.call(this);e.call(this,function(){var c=a.support.transition&&b.$element.hasClass("fade");if(!b.$element.parent().length){b.$element.appendTo(document.body)}b.$element.show();if(c){b.$element[0].offsetWidth}b.$element.addClass("in");c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();var e=this;b=a.Event("hide");this.$element.trigger(b);if(!this.isShown||b.isDefaultPrevented())return;this.isShown=false;a("body").removeClass("modal-open");g.call(this);this.$element.removeClass("in");a.support.transition&&this.$element.hasClass("fade")?c.call(this):d.call(this)}};a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);if(!e)d.data("modal",e=new b(this,f));if(typeof c=="string")e[c]();else if(f.show)e.show()})};a.fn.modal.defaults={backdrop:true,keyboard:true,show:true};a.fn.modal.Constructor=b;a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({},e.data(),c.data());b.preventDefault();e.modal(f)})})}(window.jQuery);!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b;this.$element=a(c);this.options=this.getOptions(d);this.enabled=true;if(this.options.trigger!="manual"){e=this.options.trigger=="hover"?"mouseenter":"focus";f=this.options.trigger=="hover"?"mouseleave":"blur";this.$element.on(e,this.options.selector,a.proxy(this.enter,this));this.$element.on(f,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){b=a.extend({},a.fn[this.type].defaults,b,this.$element.data());if(b.delay&&typeof b.delay=="number"){b.delay={show:b.delay,hide:b.delay}}return b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout);c.hoverState="in";this.timeout=setTimeout(function(){if(c.hoverState=="in")c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(this.timeout)clearTimeout(this.timeout);if(!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out";this.timeout=setTimeout(function(){if(c.hoverState=="out")c.hide()},c.options.delay.hide)},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip();this.setContent();if(this.options.animation){a.addClass("fade")}f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement;b=/in/.test(f);a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body);c=this.getPosition(b);d=a[0].offsetWidth;e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width};break}a.css(g).addClass(f).addClass("in")}},isHTML:function(a){return typeof a!="string"||a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(a)},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.isHTML(b)?"html":"text"](b);a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b);c.remove()})}var b=this,c=this.tip();c.removeClass("in");a.support.transition&&this.$tip.hasClass("fade")?d():c.remove()},fixTitle:function(){var a=this.$element;if(a.attr("title")||typeof a.attr("data-original-title")!="string"){a.attr("data-original-title",a.attr("title")||"").removeAttr("title")}},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title);return a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;if(!e)d.data("tooltip",e=new b(this,f));if(typeof c=="string")e[c]()})};a.fn.tooltip.Constructor=b;a.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}}(window.jQuery);!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.isHTML(b)?"html":"text"](b);a.find(".popover-content > *")[this.isHTML(c)?"html":"text"](c);a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content);return a},tip:function(){if(!this.$tip){this.$tip=a(this.options.template)}return this.$tip}});a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;if(!e)d.data("popover",e=new b(this,f));if(typeof c=="string")e[c]()})};a.fn.popover.Constructor=b;a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery);!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c);this.$scrollElement=e.on("scroll.scroll.data-api",d);this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=a("body");this.refresh();this.process()}"use strict";b.prototype={constructor:b,refresh:function(){var b=this,c;this.offsets=a([]);this.targets=a([]);c=this.$body.find(this.selector).map(function(){var b=a(this),c=b.data("target")||b.attr("href"),d=/^#\w/.test(c)&&a(c);return d&&c.length&&[[d.position().top,c]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]);b.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget,g;if(a>=c){return f!=(g=e.last()[0])&&this.activate(g)}for(g=d.length;g--;){f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])}},activate:function(b){var c,d;this.activeTarget=b;a(this.selector).parent(".active").removeClass("active");d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]';c=a(d).parent("li").addClass("active");if(c.parent(".dropdown-menu")){c=c.closest("li.dropdown").addClass("active")}c.trigger("activate")}};a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;if(!e)d.data("scrollspy",e=new b(this,f));if(typeof c=="string")e[c]()})};a.fn.scrollspy.Constructor=b;a.fn.scrollspy.defaults={offset:10};a(function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery);!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f,g;if(!d){d=b.attr("href");d=d&&d.replace(/.*(?=#[^\s]*$)/,"")}if(b.parent("li").hasClass("active"))return;e=c.find(".active a").last()[0];g=a.Event("show",{relatedTarget:e});b.trigger(g);if(g.isDefaultPrevented())return;f=a(d);this.activate(b.parent("li"),c);this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");if(f){b[0].offsetWidth;b.addClass("in")}else{b.removeClass("fade")}if(b.parent(".dropdown-menu")){b.closest("li.dropdown").addClass("active")}d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g();e.removeClass("in")}};a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");if(!e)d.data("tab",e=new b(this));if(typeof c=="string")e[c]()})};a.fn.tab.Constructor=b;a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault();a(this).tab("show")})})}(window.jQuery);!function(a){"use strict";var b=function(b,c){this.$element=a(b);this.options=a.extend({},a.fn.typeahead.defaults,c);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.$menu=a(this.options.menu).appendTo("body");this.source=this.options.source;this.shown=false;this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(a)).change();return this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:b.top+b.height,left:b.left});this.$menu.show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(b){var c=this,d,e;this.query=this.$element.val();if(!this.query){return this.shown?this.hide():this}d=a.grep(this.source,function(a){return c.matcher(a)});d=this.sorter(d);if(!d.length){return this.shown?this.hide():this}return this.render(d.slice(0,this.options.items)).show()},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift()){if(!e.toLowerCase().indexOf(this.query.toLowerCase()))b.push(e);else if(~e.indexOf(this.query))c.push(e);else d.push(e)}return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;b=a(b).map(function(b,d){b=a(c.options.item).attr("data-value",d);b.find("a").html(c.highlighter(d));return b[0]});b.first().addClass("active");this.$menu.html(b);return this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();if(!d.length){d=a(this.$menu.find("li")[0])}d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();if(!c.length){c=this.$menu.find("li").last()}c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this));if(a.browser.webkit||a.browser.msie){this.$element.on("keydown",a.proxy(this.keypress,this))}this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},keyup:function(a){switch(a.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation();a.preventDefault()},keypress:function(a){if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:if(a.type!="keydown")break;a.preventDefault();this.prev();break;case 40:if(a.type!="keydown")break;a.preventDefault();this.next();break}a.stopPropagation()},blur:function(a){var b=this;setTimeout(function(){b.hide()},150)},click:function(a){a.stopPropagation();a.preventDefault();this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active");a(b.currentTarget).addClass("active")}};a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;if(!e)d.data("typeahead",e=new b(this,f));if(typeof c=="string")e[c]()})};a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'};a.fn.typeahead.Constructor=b;a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;b.preventDefault();c.typeahead(c.data())})})}(window.jQuery);

/***Drag and Drop****/
var hasTouch='ontouchstart'in document.documentElement,startEvent=hasTouch?'touchstart':'mousedown',moveEvent=hasTouch?'touchmove':'mousemove',endEvent=hasTouch?'touchend':'mouseup';if(hasTouch){$.each("touchstart touchmove touchend".split(" "),function(i,name){jQuery.event.fixHooks[name]=jQuery.event.mouseHooks});alert("has Touch")}jQuery.tableDnD={currentTable:null,dragObject:null,mouseOffset:null,oldY:0,build:function(options){this.each(function(){this.tableDnDConfig=jQuery.extend({onDragStyle:null,onDropStyle:null,onDragClass:"tDnD_whileDrag",onDrop:null,onDragStart:null,scrollAmount:5,serializeRegexp:/[^\-]*$/,serializeParamName:null,dragHandle:null},options||{});jQuery.tableDnD.makeDraggable(this)});return this},makeDraggable:function(table){var config=table.tableDnDConfig;if(config.dragHandle){var cells=jQuery(table.tableDnDConfig.dragHandle,table);cells.each(function(){jQuery(this).bind(startEvent,function(ev){jQuery.tableDnD.initialiseDrag(jQuery(this).parents('tr')[0],table,this,ev,config);return false})})}else{var rows=jQuery("tr",table);rows.each(function(){var row=jQuery(this);if(!row.hasClass("nodrag")){row.bind(startEvent,function(ev){if(ev.target.tagName=="TD"){jQuery.tableDnD.initialiseDrag(this,table,this,ev,config);return false}}).css("cursor","move")}})}},initialiseDrag:function(dragObject,table,target,evnt,config){jQuery.tableDnD.dragObject=dragObject;jQuery.tableDnD.currentTable=table;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(target,evnt);jQuery.tableDnD.originalOrder=jQuery.tableDnD.serialize();jQuery(document).bind(moveEvent,jQuery.tableDnD.mousemove).bind(endEvent,jQuery.tableDnD.mouseup);if(config.onDragStart){config.onDragStart(table,target)}},updateTables:function(){this.each(function(){if(this.tableDnDConfig){jQuery.tableDnD.makeDraggable(this)}})},mouseCoords:function(ev){if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY}}return{x:ev.clientX+document.body.scrollLeft-document.body.clientLeft,y:ev.clientY+document.body.scrollTop-document.body.clientTop}},getMouseOffset:function(target,ev){ev=ev||window.event;var docPos=this.getPosition(target);var mousePos=this.mouseCoords(ev);return{x:mousePos.x-docPos.x,y:mousePos.y-docPos.y}},getPosition:function(e){var left=0;var top=0;if(e.offsetHeight==0){e=e.firstChild}while(e.offsetParent){left+=e.offsetLeft;top+=e.offsetTop;e=e.offsetParent}left+=e.offsetLeft;top+=e.offsetTop;return{x:left,y:top}},mousemove:function(ev){if(jQuery.tableDnD.dragObject==null){return}if(ev.type=='touchmove'){event.preventDefault()}var dragObj=jQuery(jQuery.tableDnD.dragObject);var config=jQuery.tableDnD.currentTable.tableDnDConfig;var mousePos=jQuery.tableDnD.mouseCoords(ev);var y=mousePos.y-jQuery.tableDnD.mouseOffset.y;var yOffset=window.pageYOffset;if(document.all){if(typeof document.compatMode!='undefined'&&document.compatMode!='BackCompat'){yOffset=document.documentElement.scrollTop}else if(typeof document.body!='undefined'){yOffset=document.body.scrollTop}}if(mousePos.y-yOffset<config.scrollAmount){window.scrollBy(0,-config.scrollAmount)}else{var windowHeight=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;if(windowHeight-(mousePos.y-yOffset)<config.scrollAmount){window.scrollBy(0,config.scrollAmount)}}if(y!=jQuery.tableDnD.oldY){var movingDown=y>jQuery.tableDnD.oldY;jQuery.tableDnD.oldY=y;if(config.onDragClass){dragObj.addClass(config.onDragClass)}else{dragObj.css(config.onDragStyle)}var currentRow=jQuery.tableDnD.findDropTargetRow(dragObj,y);if(currentRow){if(movingDown&&jQuery.tableDnD.dragObject!=currentRow){jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,currentRow.nextSibling)}else if(!movingDown&&jQuery.tableDnD.dragObject!=currentRow){jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,currentRow)}}}return false},findDropTargetRow:function(draggedRow,y){var rows=jQuery.tableDnD.currentTable.rows;for(var i=0;i<rows.length;i++){var row=rows[i];var rowY=this.getPosition(row).y;var rowHeight=parseInt(row.offsetHeight)/2;if(row.offsetHeight==0){rowY=this.getPosition(row.firstChild).y;rowHeight=parseInt(row.firstChild.offsetHeight)/2}if((y>rowY-rowHeight)&&(y<(rowY+rowHeight))){if(row==draggedRow){return null}var config=jQuery.tableDnD.currentTable.tableDnDConfig;if(config.onAllowDrop){if(config.onAllowDrop(draggedRow,row)){return row}else{return null}}else{var nodrop=jQuery(row).hasClass("nodrop");if(!nodrop){return row}else{return null}}return row}}return null},mouseup:function(e){if(jQuery.tableDnD.currentTable&&jQuery.tableDnD.dragObject){jQuery(document).unbind(moveEvent,jQuery.tableDnD.mousemove).unbind(endEvent,jQuery.tableDnD.mouseup);var droppedRow=jQuery.tableDnD.dragObject;var config=jQuery.tableDnD.currentTable.tableDnDConfig;if(config.onDragClass){jQuery(droppedRow).removeClass(config.onDragClass)}else{jQuery(droppedRow).css(config.onDropStyle)}jQuery.tableDnD.dragObject=null;var newOrder=jQuery.tableDnD.serialize();if(config.onDrop&&(jQuery.tableDnD.originalOrder!=newOrder)){config.onDrop(jQuery.tableDnD.currentTable,droppedRow)}jQuery.tableDnD.currentTable=null}},serialize:function(){if(jQuery.tableDnD.currentTable){return jQuery.tableDnD.serializeTable(jQuery.tableDnD.currentTable)}else{return"Error: No Table id set, you need to set an id on your table and every row"}},serializeTable:function(table){var result="";var tableId=table.id;var rows=table.rows;for(var i=0;i<rows.length;i++){if(result.length>0)result+="&";var rowId=rows[i].id;if(rowId&&rowId&&table.tableDnDConfig&&table.tableDnDConfig.serializeRegexp){rowId=rowId.match(table.tableDnDConfig.serializeRegexp)[0]}result+=tableId+'[]='+rowId}return result},serializeTables:function(){var result="";this.each(function(){result+=jQuery.tableDnD.serializeTable(this)});return result}};jQuery.fn.extend({tableDnD:jQuery.tableDnD.build,tableDnDUpdate:jQuery.tableDnD.updateTables,tableDnDSerialize:jQuery.tableDnD.serializeTables});

// ColorBox v1.3.14 - a full featured, light-weight, customizable lightbox based on jQuery 1.3+
// Copyright (c) 2010 Jack Moore - jack@colorpowered.com
// Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
(function(b,ib){var t="none",M="LoadedContent",c=false,v="resize.",o="y",q="auto",e=true,L="nofollow",m="x";function f(a,c){a=a?' id="'+i+a+'"':"";c=c?' style="'+c+'"':"";return b("<div"+a+c+"/>")}function p(a,b){b=b===m?n.width():n.height();return typeof a==="string"?Math.round(/%/.test(a)?b/100*parseInt(a,10):parseInt(a,10)):a}function U(b){return a.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(b)}function cb(a){for(var c in a)if(b.isFunction(a[c])&&c.substring(0,2)!=="on")a[c]=a[c].call(l);a.rel=a.rel||l.rel||L;a.href=a.href||b(l).attr("href");a.title=a.title||l.title;return a}function w(c,a){a&&a.call(l);b.event.trigger(c)}function jb(){var b,e=i+"Slideshow_",c="click."+i,f,k;if(a.slideshow&&h[1]){f=function(){F.text(a.slideshowStop).unbind(c).bind(V,function(){if(g<h.length-1||a.loop)b=setTimeout(d.next,a.slideshowSpeed)}).bind(W,function(){clearTimeout(b)}).one(c+" "+N,k);j.removeClass(e+"off").addClass(e+"on");b=setTimeout(d.next,a.slideshowSpeed)};k=function(){clearTimeout(b);F.text(a.slideshowStart).unbind([V,W,N,c].join(" ")).one(c,f);j.removeClass(e+"on").addClass(e+"off")};a.slideshowAuto?f():k()}}function db(c){if(!O){l=c;a=cb(b.extend({},b.data(l,r)));h=b(l);g=0;if(a.rel!==L){h=b("."+G).filter(function(){return (b.data(this,r).rel||this.rel)===a.rel});g=h.index(l);if(g===-1){h=h.add(l);g=h.length-1}}if(!u){u=E=e;j.show();if(a.returnFocus)try{l.blur();b(l).one(eb,function(){try{this.focus()}catch(a){}})}catch(f){}x.css({opacity:+a.opacity,cursor:a.overlayClose?"pointer":q}).show();a.w=p(a.initialWidth,m);a.h=p(a.initialHeight,o);d.position(0);X&&n.bind(v+P+" scroll."+P,function(){x.css({width:n.width(),height:n.height(),top:n.scrollTop(),left:n.scrollLeft()})}).trigger("scroll."+P);w(fb,a.onOpen);Y.add(H).add(I).add(F).add(Z).hide();ab.html(a.close).show()}d.load(e)}}var gb={transition:"elastic",speed:300,width:c,initialWidth:"600",innerWidth:c,maxWidth:c,height:c,initialHeight:"450",innerHeight:c,maxHeight:c,scalePhotos:e,scrolling:e,inline:c,html:c,iframe:c,photo:c,href:c,title:c,rel:c,opacity:.9,preloading:e,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:c,returnFocus:e,loop:e,slideshow:c,slideshowAuto:e,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:c,onLoad:c,onComplete:c,onCleanup:c,onClosed:c,overlayClose:e,escKey:e,arrowKey:e},r="colorbox",i="cbox",fb=i+"_open",W=i+"_load",V=i+"_complete",N=i+"_cleanup",eb=i+"_closed",Q=i+"_purge",hb=i+"_loaded",A=b.browser.msie&&!b.support.opacity,X=A&&b.browser.version<7,P=i+"_IE6",x,j,B,s,bb,T,R,S,h,n,k,J,K,Z,Y,F,I,H,ab,C,D,y,z,l,g,a,u,E,O=c,d,G=i+"Element";d=b.fn[r]=b[r]=function(c,f){var a=this,d;if(!a[0]&&a.selector)return a;c=c||{};if(f)c.onComplete=f;if(!a[0]||a.selector===undefined){a=b("<a/>");c.open=e}a.each(function(){b.data(this,r,b.extend({},b.data(this,r)||gb,c));b(this).addClass(G)});d=c.open;if(b.isFunction(d))d=d.call(a);d&&db(a[0]);return a};d.init=function(){var l="hover",m="clear:left";n=b(ib);j=f().attr({id:r,"class":A?i+"IE":""});x=f("Overlay",X?"position:absolute":"").hide();B=f("Wrapper");s=f("Content").append(k=f(M,"width:0; height:0; overflow:hidden"),K=f("LoadingOverlay").add(f("LoadingGraphic")),Z=f("Title"),Y=f("Current"),I=f("Next"),H=f("Previous"),F=f("Slideshow").bind(fb,jb),ab=f("Close"));B.append(f().append(f("TopLeft"),bb=f("TopCenter"),f("TopRight")),f(c,m).append(T=f("MiddleLeft"),s,R=f("MiddleRight")),f(c,m).append(f("BottomLeft"),S=f("BottomCenter"),f("BottomRight"))).children().children().css({"float":"left"});J=f(c,"position:absolute; width:9999px; visibility:hidden; display:none");b("body").prepend(x,j.append(B,J));s.children().hover(function(){b(this).addClass(l)},function(){b(this).removeClass(l)}).addClass(l);C=bb.height()+S.height()+s.outerHeight(e)-s.height();D=T.width()+R.width()+s.outerWidth(e)-s.width();y=k.outerHeight(e);z=k.outerWidth(e);j.css({"padding-bottom":C,"padding-right":D}).hide();I.click(d.next);H.click(d.prev);ab.click(d.close);s.children().removeClass(l);b("."+G).live("click",function(a){if(!(a.button!==0&&typeof a.button!=="undefined"||a.ctrlKey||a.shiftKey||a.altKey)){a.preventDefault();db(this)}});x.click(function(){a.overlayClose&&d.close()});b(document).bind("keydown",function(b){if(u&&a.escKey&&b.keyCode===27){b.preventDefault();d.close()}if(u&&a.arrowKey&&!E&&h[1])if(b.keyCode===37&&(g||a.loop)){b.preventDefault();H.click()}else if(b.keyCode===39&&(g<h.length-1||a.loop)){b.preventDefault();I.click()}})};d.remove=function(){j.add(x).remove();b("."+G).die("click").removeData(r).removeClass(G)};d.position=function(f,d){function b(a){bb[0].style.width=S[0].style.width=s[0].style.width=a.style.width;K[0].style.height=K[1].style.height=s[0].style.height=T[0].style.height=R[0].style.height=a.style.height}var e,h=Math.max(document.documentElement.clientHeight-a.h-y-C,0)/2+n.scrollTop(),g=Math.max(n.width()-a.w-z-D,0)/2+n.scrollLeft();e=j.width()===a.w+z&&j.height()===a.h+y?0:f;B[0].style.width=B[0].style.height="9999px";j.dequeue().animate({width:a.w+z,height:a.h+y,top:h,left:g},{duration:e,complete:function(){b(this);E=c;B[0].style.width=a.w+z+D+"px";B[0].style.height=a.h+y+C+"px";d&&d()},step:function(){b(this)}})};d.resize=function(b){if(u){b=b||{};if(b.width)a.w=p(b.width,m)-z-D;if(b.innerWidth)a.w=p(b.innerWidth,m);k.css({width:a.w});if(b.height)a.h=p(b.height,o)-y-C;if(b.innerHeight)a.h=p(b.innerHeight,o);if(!b.innerHeight&&!b.height){b=k.wrapInner("<div style='overflow:auto'></div>").children();a.h=b.height();b.replaceWith(b.children())}k.css({height:a.h});d.position(a.transition===t?0:a.speed)}};d.prep=function(o){var e="hidden";function m(t){var q,f,o,e,m=h.length,s=a.loop;d.position(t,function(){if(u){A&&p&&k.fadeIn(100);k.show();w(hb);Z.show().html(a.title);if(m>1){typeof a.current==="string"&&Y.html(a.current.replace(/\{current\}/,g+1).replace(/\{total\}/,m)).show();I[s||g<m-1?"show":"hide"]().html(a.next);H[s||g?"show":"hide"]().html(a.previous);q=g?h[g-1]:h[m-1];o=g<m-1?h[g+1]:h[0];a.slideshow&&F.show();if(a.preloading){e=b.data(o,r).href||o.href;f=b.data(q,r).href||q.href;e=b.isFunction(e)?e.call(o):e;f=b.isFunction(f)?f.call(q):f;if(U(e))b("<img/>")[0].src=e;if(U(f))b("<img/>")[0].src=f}}K.hide();if(a.transition==="fade")j.fadeTo(l,1,function(){if(A)j[0].style.filter=c});else if(A)j[0].style.filter=c;n.bind(v+i,function(){d.position(0)});w(V,a.onComplete)}})}if(u){var p,l=a.transition===t?0:a.speed;n.unbind(v+i);k.remove();k=f(M).html(o);k.hide().appendTo(J.show()).css({width:function(){a.w=a.w||k.width();a.w=a.mw&&a.mw<a.w?a.mw:a.w;return a.w}(),overflow:a.scrolling?q:e}).css({height:function(){a.h=a.h||k.height();a.h=a.mh&&a.mh<a.h?a.mh:a.h;return a.h}()}).prependTo(s);J.hide();b("#"+i+"Photo").css({cssFloat:t,marginLeft:q,marginRight:q});X&&b("select").not(j.find("select")).filter(function(){return this.style.visibility!==e}).css({visibility:e}).one(N,function(){this.style.visibility="inherit"});a.transition==="fade"?j.fadeTo(l,0,function(){m(0)}):m(l)}};d.load=function(u){var n,c,s,q=d.prep;E=e;l=h[g];u||(a=cb(b.extend({},b.data(l,r))));w(Q);w(W,a.onLoad);a.h=a.height?p(a.height,o)-y-C:a.innerHeight&&p(a.innerHeight,o);a.w=a.width?p(a.width,m)-z-D:a.innerWidth&&p(a.innerWidth,m);a.mw=a.w;a.mh=a.h;if(a.maxWidth){a.mw=p(a.maxWidth,m)-z-D;a.mw=a.w&&a.w<a.mw?a.w:a.mw}if(a.maxHeight){a.mh=p(a.maxHeight,o)-y-C;a.mh=a.h&&a.h<a.mh?a.h:a.mh}n=a.href;K.show();if(a.inline){f().hide().insertBefore(b(n)[0]).one(Q,function(){b(this).replaceWith(k.children())});q(b(n))}else if(a.iframe){j.one(hb,function(){var c=b("<iframe name='"+(new Date).getTime()+"' frameborder=0"+(a.scrolling?"":" scrolling='no'")+(A?" allowtransparency='true'":"")+" style='width:100%; height:100%; border:0; display:block;'/>");c[0].src=a.href;c.appendTo(k).one(Q,function(){c[0].src='//about:blank'})});q(" ")}else if(a.html)q(a.html);else if(U(n)){c=new Image;c.onload=function(){var e;c.onload=null;c.id=i+"Photo";b(c).css({border:t,display:"block",cssFloat:"left"});if(a.scalePhotos){s=function(){c.height-=c.height*e;c.width-=c.width*e};if(a.mw&&c.width>a.mw){e=(c.width-a.mw)/c.width;s()}if(a.mh&&c.height>a.mh){e=(c.height-a.mh)/c.height;s()}}if(a.h)c.style.marginTop=Math.max(a.h-c.height,0)/2+"px";h[1]&&(g<h.length-1||a.loop)&&b(c).css({cursor:"pointer"}).click(d.next);if(A)c.style.msInterpolationMode="bicubic";setTimeout(function(){q(c)},1)};setTimeout(function(){c.src=n},1)}else n&&J.load(n,function(d,c,a){q(c==="error"?"Request unsuccessful: "+a.statusText:b(this).children())})};d.next=function(){if(!E){g=g<h.length-1?g+1:0;d.load()}};d.prev=function(){if(!E){g=g?g-1:h.length-1;d.load()}};d.close=function(){if(u&&!O){O=e;u=c;w(N,a.onCleanup);n.unbind("."+i+" ."+P);x.fadeTo("fast",0);j.stop().fadeTo("fast",0,function(){w(Q);k.remove();j.add(x).css({opacity:1,cursor:q}).hide();setTimeout(function(){O=c;w(eb,a.onClosed)},1)})}};d.element=function(){return b(l)};d.settings=gb;b(d.init)})(jQuery,this);